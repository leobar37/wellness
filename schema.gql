# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Detail {
  name: String!
  description: String!
  price: Float!
}

type Asistence {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  note: String!
  client: Client
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AssetBoot {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  assets: [Asset]!
}

type Asset {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  name: String!
  size: Float
  previewUrl: String
  boot: AssetBoot
}

type DetailFicha {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  weight: Float!
  objective: String
  note: String
  open: Boolean!
  asset: AssetBoot
}

type Ficha {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  closed: Boolean!
  closedAt: DateTime
  details: [DetailFicha!]!
  client: Client!
}

type Client {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  photo: Asset
  code: String!
  dni: String!
  email: String!
  name: String!
  lastName: String!
  birth: DateTime
  phone: String
  direction: String
  sex: Sex!
  mode: ModeRegiser!
  currentFicha: Ficha
}

enum Sex {
  WOMEN
  MEN
  OTHER
}

enum ModeRegiser {
  SELF
  ADMIN
}

type Contract {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  note: String
  paid: Boolean!
  price: Float!
  finishedAt: DateTime!
  suscription: Suscription!
}

type Suscription {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  duration: Int!
  active: Boolean!
  mode: ModeSuscription!
  finishedAt: DateTime
  startAt: DateTime
  contracts: [Contract]!
}

"""This enum determine the mode of a suscription"""
enum ModeSuscription {
  """"""
  FIXED

  """"""
  DINAMIC
}

type Activity {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  detail: Detail!
  suscription: Suscription!
}

type Administrator {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  name: String!
  lastName: String!
  email: String!
  description: String!
  temportalToken: String
  rol: Role!
}

"""Describe the role of a administrator"""
enum Role {
  ADMIN
  CLIENT
  STAFF
}

type Plan {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  detail: Detail!
  visible: Boolean!
  suscription: Suscription!
}

"""This is a view table for show a resume of contract"""
type ContractView {
  clientId: ID!
  suscriptionId: ID!
  contractId: ID!
  clientName: String!
  clientLastName: String!
  dni: String!
  realPrice: Float!
  note: String!
  finished: Boolean!
  paid: Boolean!
  createdAt: DateTime!
  finishedAt: DateTime!
  price: Float
  name: String
  type: ServiceType
  serviceId: ID
  description: String
}

"""Type of the service (plan, activity)"""
enum ServiceType {
  plan
  activity
}

type ResponseSignature {
  signature: String!
  timestamp: Float!
}

type Query {
  ping: String!
  getAdministrators: [Administrator!]!
  clients: [Client!]!
  client(id: ID!): Client!
  finAsistences(cliendId: ID!): [Asistence!]!
  getPlans(filters: FiltersPlan): [Plan!]!
  getPlan(id: ID!): Plan!
  getActivities(filters: FiltersActivity): [Activity!]!
  getActivity(id: ID!): Activity!
  getViewContracts(filters: FiContractsView): [ContractView!]!
  getFicha(userId: Int!): Ficha
  getFichas(userId: Int!): [Ficha!]
}

input FiltersPlan {
  active: Boolean
}

input FiltersActivity {
  active: Boolean
}

input FiContractsView {
  clientId: ID
  serviceId: ID
  type: ServiceType
}

type Mutation {
  generateTokenForAdmin(input: GenerateTokenInput!): Administrator!
  registerAdmin(input: RegisterAdminInput!): Administrator!
  regeneratedNewToken(input: GenerateTokenInput!): Administrator!
  registerClient(client: ClientInput!): Client!
  updateCLient(input: ClientInput!, id: ID!): Client!
  deleteCLient(id: ID!): Client!
  createAsistence(asistence: InputAsistence!): Asistence!
  deleteAsistence(id: ID!): Asistence!
  updateAsistence(input: InputAsistence!, id: ID!): Asistence!
  createPlan(input: PlanInput!): Plan!
  deletePlan(id: ID!): Plan!
  joinPlan(contract: ContractInput!): Contract!
  updatePlan(input: PlanInput!, id: ID!): Plan!
  createActivity(input: ActivityInput!): Activity!
  deleteActivity(id: ID!): Activity!
  joinActivity(contract: ContractInput!): Contract!
  updateActivity(input: ActivityInput!, id: ID!): Activity!
  editContract(input: ContractEditInput!): ContractView!
  deleteContract(id: ID!): ContractView!
  signature(publicId: String): ResponseSignature!
  deleteResource(input: DeleteAssetInput!): ResourceUnion!
  createResource(resource: AssetInput!): ResourceUnion!
  editResource(resource: AssetEditInput!): ResourceUnion!
  openAndCloseFicha(input: FichaInput!): Ficha!
  updateFicha(detailId: Int!, input: FichaInput!): Ficha!
  deleteFicha(fichaId: Int!): Ficha!
}

input GenerateTokenInput {
  email: String!
  role: Role!
}

input RegisterAdminInput {
  name: String!
  lastName: String!
  temporalToken: String!
}

input ClientInput {
  code: String
  dni: String!
  phone: String!
  name: String!
  lastName: String!
  birthday: DateTime
  direction: String!
  email: String!
  sex: Sex!
  modeRegister: ModeRegiser!
  photoId: Int
}

input InputAsistence {
  note: String
  clientId: ID!
}

input PlanInput {
  """Determine if this plan is visible for the users"""
  visible: Boolean!
  detail: DetailInput!
  duration: Int!

  """Determine if a plan is active"""
  active: Boolean!
}

input DetailInput {
  name: String!
  description: String!
  price: Float!
}

input ContractInput {
  clientId: Float!
  paid: Boolean!
  price: Float!
  note: String
  planId: ID
  activityId: ID
}

input ActivityInput {
  visible: Boolean!
  detail: DetailInput!
  duration: Int!
  mode: ModeSuscription!
  startAt: DateTime
}

input ContractEditInput {
  contractId: ID!
  paid: Boolean!
  price: Float!
  note: String
}

union ResourceUnion = AssetBoot | Asset

input DeleteAssetInput {
  id: ID!
  isMultiple: Boolean!
}

input AssetInput {
  isMultiple: Boolean!
  metadata: JSONObject
  metadatas: [JSONObject!]
  bootId: String
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject

input AssetEditInput {
  id: ID!
  metadata: JSONObject
}

input FichaInput {
  weight: Float!
  objective: String

  """This images of the ficha"""
  assetId: Float!
  note: String

  """When this is null , close the ficha"""
  fichaId: ID
  clientId: Int
  open: Boolean
}
