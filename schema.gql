# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Detail {
  name: String!
  description: String!
  price: Float!
}

type Asistence {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  note: String!
  client: Client
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AssetBoot {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  assets: [Asset]!
}

type Asset {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  name: String!
  size: Float
  previewUrl: String
  boot: AssetBoot
}

type DetailFicha {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  weight: Float!
  objective: String
  note: String
  open: Boolean!
  asset: AssetBoot
}

type Ficha {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  closed: Boolean!
  closedAt: DateTime
  details: [DetailFicha!]!
  client: Client!
}

type Client {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  photo: Asset
  code: String!
  dni: String!
  email: String!
  name: String!
  lastName: String!
  birth: DateTime
  phone: String
  direction: String
  sex: Sex!
  mode: ModeRegiser!
  currentFicha: Ficha
}

enum Sex {
  WOMEN
  MEN
  OTHER
}

enum ModeRegiser {
  SELF
  ADMIN
}

type Contract {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  paid: Boolean!
  price: Float!
}

type Suscription {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  duration: Int!
  active: Boolean!
  mode: ModeSuscription!
  finishedAt: DateTime
  startAt: DateTime
  contracts: [Contract]!
}

"""This enum determine the mode of a suscription"""
enum ModeSuscription {
  """"""
  FIXED

  """"""
  DINAMIC
}

type Activity {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  detail: Detail!
  suscription: Suscription!
}

type Plan {
  id: ID!
  createdAt: DateTime!
  updateAt: DateTime!
  detail: Detail!
  visible: Boolean!
  suscription: Suscription!
}

type ResponseSignature {
  signature: String!
  timestamp: Float!
}

type Query {
  ping: String!
  clients: [Client!]!
  client(id: ID!): Client!
  finAsistences(cliendId: ID!): [Asistence!]!
  getPlans: [Plan!]!
  getPlan(id: ID!): Plan!
  getActivities: [Activity!]!
  getActivity(id: ID!): Activity!
  getFicha(userId: Int!): Ficha
  getFichas(userId: Int!): [Ficha!]
}

type Mutation {
  registerClient(client: ClientInput!): Client!
  updateCLient(input: ClientInput!, id: ID!): Client!
  deleteCLient(id: ID!): Client!
  createAsistence(asistence: InputAsistence!): Asistence!
  deleteAsistence(id: ID!): Asistence!
  updateAsistence(input: InputAsistence!, id: ID!): Asistence!
  createPlan(input: PlanInput!): Plan!
  deletePlan(id: ID!): Plan!
  joinPlan(contract: ContractInput!): Boolean!
  updatePlan(input: PlanInput!, id: ID!): Plan!
  createActivity(input: ActivityInput!): Activity!
  deleteActivity(id: ID!): Activity!
  joinActivity(contract: ContractInput!): Contract!
  updateActivity(input: ActivityInput!, id: ID!): Activity!
  signature(publicId: String): ResponseSignature!
  deleteResource(input: DeleteAssetInput!): ResourceUnion!
  createResource(resource: AssetInput!): ResourceUnion!
  openAndCloseFicha(input: FichaInput!): Ficha!
  updateFicha(detailId: Int!, input: FichaInput!): Ficha!
  deleteFicha(fichaId: Int!): Ficha!
}

input ClientInput {
  code: String
  dni: String!
  phone: String!
  name: String!
  lastName: String!
  birthday: DateTime
  direction: String!
  email: String!
  note: String!
  sex: Sex!
  modeRegister: ModeRegiser!
  photoId: Int
}

input InputAsistence {
  note: String
  clientId: ID!
}

input PlanInput {
  """Determine if this plan is visible for the users"""
  visible: Boolean!
  detail: DetailInput!
  duration: Int!

  """Determine if a plan is active"""
  active: Boolean!
}

input DetailInput {
  name: String!
  description: String!
  price: Float!
}

input ContractInput {
  clientId: Float!
  paid: Boolean!
  price: Float!
  note: String
  planId: ID
  activityId: ID
}

input ActivityInput {
  visible: Boolean!
  detail: DetailInput!
  duration: Int!
  mode: ModeSuscription!
  startAt: DateTime
}

union ResourceUnion = AssetBoot | Asset

input DeleteAssetInput {
  id: ID!
  isMultiple: Boolean!
}

input AssetInput {
  isMultiple: Boolean!
  metadata: JSONObject
  metadatas: [JSONObject!]
  bootId: String
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject

input FichaInput {
  weight: Float!
  objective: String

  """This images of the ficha"""
  assetId: Float!
  note: String

  """When this is null , close the ficha"""
  fichaId: ID
  clientId: Int
  open: Boolean
}
